<div class="change-password-popup__container">
  <div class="change-password-popup__content">
    <div class="change-password-popup__form-label">Change password</div>
    <div class="change-password-popup__form-message">
      To change your password, please fill in the fields below. Your password must contain at least 8 characters.
    </div>
    <form
      (ngSubmit)="changePassword()"
      [formGroup]="changePasswordFormGroup"
      class="change-password-popup__form-container"
    >
      <div class="mb-3">
        <label for="newPassword" class="form-label required change-password-popup__form-input-label">
          New Password
        </label>
        <div class="input-group">
          <input
            [type]="showNewPassword ? 'text' : 'password'"
            class="form-control"
            [ngClass]="{
              'change-password-popup__form-input__red-border': isFormControlInvalid(
                changePasswordFormGroup.controls.newPassword
              )
            }"
            formControlName="newPassword"
            id="newPassword"
            placeholder="New Password"
          />
          <fa-icon
            class="change-password-popup__form-button-eye"
            (click)="showNewPassword = !showNewPassword"
            [icon]="showNewPassword ? iconEyeSlash : iconEye"
          >
          </fa-icon>
        </div>
        <small
          class="form-text text-danger"
          *ngIf="isFormControlInvalid(
                changePasswordFormGroup.controls.newPassword
              ) && changePasswordFormGroup.controls.newPassword.errors?.['required']"
        >
          Please enter your new password.
        </small>
        <small
          class="form-text text-danger"
          *ngIf="isFormControlInvalid(
                changePasswordFormGroup.controls.newPassword
              ) && changePasswordFormGroup.controls.newPassword.errors?.['minlength']"
        >
          Your password must contain at least 8 characters.
        </small>
      </div>
      <div class="mb-3">
        <label for="confirmPassword" class="form-label required change-password-popup__form-input-label">
          Confirm Password
        </label>
        <div class="input-group">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            class="form-control"
            [ngClass]="{
              'change-password-popup__form-input__red-border': isFormControlInvalid(
                changePasswordFormGroup.controls.confirmPassword
              )
            }"
            formControlName="confirmPassword"
            id="confirmPassword"
            placeholder="Confirm Password"
            (blur)="validateConfirmPassword()"
          />
          <fa-icon
            class="change-password-popup__form-button-eye"
            (click)="showConfirmPassword = !showConfirmPassword"
            [icon]="showConfirmPassword ? iconEyeSlash : iconEye"
          >
          </fa-icon>
        </div>
        <small
          class="form-text text-danger"
          *ngIf="isFormControlInvalid(
                changePasswordFormGroup.controls.confirmPassword
              ) && changePasswordFormGroup.controls.confirmPassword.errors?.['required']"
        >
          Please confirm password.
        </small>
        <small
          class="form-text text-danger"
          *ngIf="isFormControlInvalid(
                changePasswordFormGroup.controls.confirmPassword
              ) && changePasswordFormGroup.controls.confirmPassword.errors?.['minlength']"
        >
          Your password must contain at least 8 characters.
        </small>
        <small
          class="form-text text-danger"
          *ngIf="isFormControlInvalid(
                changePasswordFormGroup.controls.confirmPassword
              ) && changePasswordFormGroup.controls.confirmPassword.errors?.['confirmPasswordNotEqual']"
        >
          {{changePasswordFormGroup.controls.confirmPassword.errors?.['confirmPasswordNotEqual']}}
        </small>
      </div>
    </form>

    <div class="d-grid gap-2">
      <button type="button" (click)="changePassword()" class="btn btn-primary change-password-popup__form-button">
        Change Password
      </button>
    </div>
  </div>
</div>
